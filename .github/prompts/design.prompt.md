# 詳細設計書

> **パラメータ**: `$ARGUMENTS` に `identifier` と `説明` を指定してください
>
> - 形式: `/design <identifier> <説明>`
> - 例: `/design SMP-123 ユーザー管理機能`
>
> **指示**: このプロンプトは詳細設計書作成のみを目的としています。
>
> - コードの実装・修正は行わないでください
> - コードベースを調査し、以下のテンプレートを埋めてください
> - `{...}` のプレースホルダーを具体的な内容に置き換えてください
> - 調査の結果、特定できない項目は「要調査」と記載してください
> - `$ARGUMENTS` の最初の単語を `identifier` として扱い、それ以降を `説明` として扱ってください
> - 完成した詳細設計書は `docs/<identifier>/design.md` に保存してください

---

## 参照

#file:docs/{identifier}/requirement.md
#file:docs/{identifier}/feature.md

---

## 1. 機能概要

| 項目         | 内容                 |
| ------------ | -------------------- |
| 機能名       | {機能名}             |
| 機能ID       | {identifier}         |
| 概要         | {機能の概要説明}     |
| 対象ユーザー | {利用者の種別}       |

---

## 2. 処理フロー

### 2.1 処理フロー図

```
{処理の流れを示すフロー図（Mermaid形式推奨）}
```

### 2.2 処理フロー説明

| No. | 処理名         | 処理内容                   | 入力           | 出力           |
| --- | -------------- | -------------------------- | -------------- | -------------- |
| 1   | {処理名}       | {処理の詳細説明}           | {入力データ}   | {出力データ}   |
| 2   | {処理名}       | {処理の詳細説明}           | {入力データ}   | {出力データ}   |

---

## 3. クラス設計

### 3.1 クラス図

```
{クラス図（Mermaid形式推奨）}
```

### 3.2 クラス一覧

| クラス名       | 責務               | 主要メソッド       |
| -------------- | ------------------ | ------------------ |
| {クラス名}     | {責務の説明}       | {メソッド一覧}     |

### 3.3 メソッド定義

#### {クラス名}.{メソッド名}

| 項目       | 内容                     |
| ---------- | ------------------------ |
| 概要       | {メソッドの概要}         |
| 引数       | {引数名}: {型} - {説明}  |
| 戻り値     | {型} - {説明}            |
| 例外       | {例外クラス} - {発生条件}|
| 処理詳細   | {処理の詳細説明}         |

---

## 4. データ設計

### 4.1 データモデル

| テーブル名   | 論理名     | 概要             |
| ------------ | ---------- | ---------------- |
| {テーブル名} | {論理名}   | {テーブルの概要} |

### 4.2 テーブル定義

#### {テーブル名}

| カラム名     | 論理名     | 型         | NULL | PK  | FK  | デフォルト | 備考       |
| ------------ | ---------- | ---------- | ---- | --- | --- | ---------- | ---------- |
| {カラム名}   | {論理名}   | {データ型} | {可否} | {○/−} | {○/−} | {値}   | {備考}     |

### 4.3 ER図

```
{ER図（Mermaid形式推奨）}
```

---

## 5. インターフェース設計

### 5.1 外部インターフェース

| IF名         | 種別       | 接続先       | プロトコル | 概要           |
| ------------ | ---------- | ------------ | ---------- | -------------- |
| {IF名}       | {API/ファイル等} | {接続先} | {HTTP等}   | {概要}         |

### 5.2 API設計（該当する場合）

#### {API名}

| 項目             | 内容                   |
| ---------------- | ---------------------- |
| エンドポイント   | {Method} {パス}        |
| 概要             | {APIの概要}            |
| 認証             | {認証方式}             |

**リクエスト**

```json
{
  "field1": "{説明}",
  "field2": "{説明}"
}
```

**レスポンス**

```json
{
  "field1": "{説明}",
  "field2": "{説明}"
}
```

---

## 6. 画面設計（該当する場合）

### 6.1 画面一覧

| 画面ID     | 画面名     | 概要             | 遷移元       | 遷移先       |
| ---------- | ---------- | ---------------- | ------------ | ------------ |
| {画面ID}   | {画面名}   | {画面の概要}     | {遷移元画面} | {遷移先画面} |

### 6.2 画面レイアウト

```
{画面レイアウトの説明またはワイヤーフレーム}
```

### 6.3 画面項目定義

| 項目名       | 項目ID     | 入力形式   | 必須 | バリデーション | 備考       |
| ------------ | ---------- | ---------- | ---- | -------------- | ---------- |
| {項目名}     | {項目ID}   | {テキスト等} | {○/−} | {ルール}     | {備考}     |

---

## 7. エラー設計

### 7.1 エラー一覧

| エラーコード | エラー種別 | 発生条件         | エラーメッセージ | 対処方法       |
| ------------ | ---------- | ---------------- | ---------------- | -------------- |
| {コード}     | {種別}     | {発生条件}       | {メッセージ}     | {対処方法}     |

### 7.2 例外処理方針

| 例外種別       | 処理方針               | ログレベル |
| -------------- | ---------------------- | ---------- |
| {例外種別}     | {処理方針の説明}       | {INFO等}   |

---

## 8. 非機能要件

### 8.1 性能要件

| 項目           | 要件値           | 備考           |
| -------------- | ---------------- | -------------- |
| 応答時間       | {目標値}         | {備考}         |
| スループット   | {目標値}         | {備考}         |

### 8.2 セキュリティ要件

| 項目           | 対策内容             |
| -------------- | -------------------- |
| 認証           | {認証方式}           |
| 認可           | {認可方式}           |
| データ保護     | {暗号化等の対策}     |

---

## 9. テスト観点

| テスト種別     | 観点               | 確認内容             |
| -------------- | ------------------ | -------------------- |
| 単体テスト     | {観点}             | {確認内容}           |
| 結合テスト     | {観点}             | {確認内容}           |
| 異常系テスト   | {観点}             | {確認内容}           |

---

## 10. 次のステップ

> この詳細設計書の作成後、以下のコマンドでタスク分割に進んでください:
>
> ```
> /tasks <identifier>
> ```
